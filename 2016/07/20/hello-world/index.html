<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">

	

	<title>TextView长文本实现跑马灯效果 | Start4Android</title>
	<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
	
	
	<link rel="stylesheet" href="/css/normalize.css" type="text/css">
	<link rel="stylesheet" href="/css/basscss.css" type="text/css">
	<link rel="stylesheet" href="/css/basscss-ui-groups.css" type="text/css">
	<link rel="stylesheet" href="/css/tomorrow.css" type="text/css">
	<link rel="stylesheet" href="/css/style.css" type="text/css">
	
		<link href="https://fonts.s3.fmt01.sdapi.net/lato-v11/lato-v11-300-400-700-italic.css" rel="stylesheet" type="text/css">
	
	

	<!--[if lt IE 9]><script src="/js/html5.js" type="text/javascript"></script><![endif]-->
	<script src="/js/main.js" type="text/javascript"></script>
</head>

<body>
	<section class="container m4 clearfix">
		<div class="clearfix">
			<div class="mb4 sm-flex center nowrap">
	<div class="flex-auto block">
		<p class="inline h2">Start4Android</p> | <small class="muted">null</small>
	</div>
</div>

			<div class="mn1 center">
	
		<a href="/./" class="btn button-narrow">Home</a>
	
		<a href="/archives/" class="btn button-narrow">Archives</a>
	
		<a href="/tags/" class="btn button-narrow">Tags</a>
	
	<a href="/search.html" class="btn button-narrow" onclick="loadJQuery(this, event);" data-modal>
		<svg class="icon" data-icon="search"></svg>
	</a>
</div>

			<div class="p0 col col-12">
				<div class="m0 py2">
	<div class="md-col-12">
		<div class="overflow-hidden bg-white rounded">
			<div class="m1 p2 white">
				<div class="clearfix">
					<div class="left">
						<h1 class="h2 m0"><a href="/2016/07/20/hello-world/" class="black">
						TextView长文本实现跑马灯效果
						</a></h1>
					</div>
					<div class="right"><span class="h6 muted black">
						Jul 20 2016
					</span></div>
				</div>
			</div>
			<div class="p2 border-top">
				<p>1.设置TextView控件的focusableInTouchMode属性为true，ellipsize属性为marquee，focusable属性为true；</p>
<p>2.创建类继承TextView，实现三个方法，复写isFocused方法；</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MarqueeText</span> <span class="keyword">extends</span> <span class="title">TextView</span> </span>&#123;</div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">MarqueeText</span><span class="params">(Context context)</span> </span>&#123;</div><div class="line">           <span class="keyword">super</span>(context);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">MarqueeText</span><span class="params">(Context context, AttributeSet attrs)</span> </span>&#123;</div><div class="line">           <span class="keyword">super</span>(context, attrs);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="title">MarqueeText</span><span class="params">(Context context, AttributeSet attrs, <span class="keyword">int</span> defStyleAttr)</span> </span>&#123;</div><div class="line">           <span class="keyword">super</span>(context, attrs, defStyleAttr);</div><div class="line">       &#125;</div><div class="line"></div><div class="line">       <span class="meta">@Override</span></div><div class="line">       <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFocused</span><span class="params">()</span> </span>&#123;</div><div class="line">           <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">       &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>3.控件使用包下面的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">&lt;com.ijovo.demo04.MarqueeText</div><div class="line">android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">android:text=<span class="string">"@string/text_view"</span></div><div class="line">android:singleLine=<span class="string">"true"</span></div><div class="line">android:id=<span class="string">"@+id/text1"</span></div><div class="line">android:focusableInTouchMode=<span class="string">"true"</span></div><div class="line">android:ellipsize=<span class="string">"marquee"</span></div><div class="line">android:focusable=<span class="string">"true"</span>/&gt;</div><div class="line">&lt;com.ijovo.demo04.MarqueeText</div><div class="line">android:layout_width=<span class="string">"wrap_content"</span></div><div class="line">android:layout_height=<span class="string">"wrap_content"</span></div><div class="line">android:text=<span class="string">"@string/text_view"</span></div><div class="line">android:singleLine=<span class="string">"true"</span></div><div class="line">android:id=<span class="string">"@+id/text2"</span></div><div class="line">android:layout_below=<span class="string">"@id/text1"</span></div><div class="line">android:focusableInTouchMode=<span class="string">"true"</span></div><div class="line">android:ellipsize=<span class="string">"marquee"</span></div><div class="line">android:focusable=<span class="string">"true"</span>/&gt;</div></pre></td></tr></table></figure>

			</div>
			<div class="p2 border-top">
				<div class="clearfix">
					<div class="left">
						
					</div>
					<div class="ml2 right"><span class="h6 muted black"> </span></div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="clearfix mt2">
		
		
	</div>
	
	
</div>


			</div>
		</div>
	</section>
	<div class="container mb2 clearfix">
	<div class="sm-flex center nowrap mb2 h5">
		<div class="flex-auto border-bottom">
			<a href="https://hexo.io/" class="btn block muted">Hexo</a>
		</div>
		<div class="flex-auto border-bottom">
			<a href="https://jerry.im/essays/2016/02/hexo-theme-weightless/" class="btn block">Weightless</a> Theme
		</div>
		<div class="flex-auto border-bottom">
			Rocking <a href="http://www.basscss.com/" class="btn block">Basscss</a>
		</div>
		<div class="flex-auto border-bottom">
			
		</div>
	</div>
</div>
<script src="/js/geomicons.js"></script>
<script type="text/javascript">
	var icons = document.querySelectorAll('[data-icon]');
	geomicons.inject(icons);
</script>


	<!-- Piwik -->
	<script type="text/javascript">
	  var _paq = _paq || [];
	  _paq.push(['trackPageView']);
	  _paq.push(['enableLinkTracking']);
	  (function() {
	    var u="//communistanalytics.com/";
	    _paq.push(['setTrackerUrl', u+'piwik.php']);
	    _paq.push(['setSiteId', 1]);
	    var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
	    g.type='text/javascript'; g.async=true; g.defer=true; g.src=u+'piwik.js'; s.parentNode.insertBefore(g,s);
	  })();
	</script>
	<noscript><p><img src="//communistanalytics.com/piwik.php?idsite=1" style="border:0;" alt="" /></p></noscript>
	<!-- End Piwik Code -->



</body>
</html>
